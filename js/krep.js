// koffee 0.45.0

/*
000   000  00000000   00000000  00000000 
000  000   000   000  000       000   000
0000000    0000000    0000000   00000000 
000  000   000   000  000       000      
000   000  000   000  00000000  000
 */
var NEWLINE, _, args, childp, colorize, colormap, fs, ignoreDir, ignoreFile, karg, klog, klor, kolor, kstr, output, ref, search, slash;

ref = require('kxk'), childp = ref.childp, slash = ref.slash, karg = ref.karg, klog = ref.klog, kstr = ref.kstr, fs = ref.fs, _ = ref._;

kolor = require('./kolor');

klor = require('klor');

args = karg("krep\n    strings       . ? text to search for              . **\n    path          . ? file or folder to search in     . = |.|\n    regexp        . ? strings are regexp patterns     . = false\n    coffee        . ? search coffeescript files       . = true\n    js            . ? search javascript files         . = false \n    dot           . ? search dot files                . = false\n    any           . ? search all text files           . = false\n    recurse       . ? recurse into subdirs            . = true  . - R\n    debug         . ? debug logs                      . = false . - D\n\nversion      " + (require(__dirname + "/../package.json").version));

if (args.strings.length > 1 && args.path === '.') {
    if (slash.exists(args.strings[0])) {
        args.path = args.strings.shift();
    } else if (slash.exists(args.strings.slice(-1)[0])) {
        args.path = args.strings.pop();
    }
}

ignoreFile = function(p) {
    var base;
    base = slash.basename(p);
    if (slash.win()) {
        if (base[0] === '$') {
            return true;
        }
        if (base === 'desktop.ini') {
            return true;
        }
        if (base.toLowerCase().startsWith('ntuser')) {
            return true;
        }
    }
    if (!args.all) {
        if (base[0] === '.') {
            return true;
        }
    }
    return false;
};

ignoreDir = function(p) {
    var base;
    if (!args.all) {
        base = slash.basename(p);
        if (base[0] === '.') {
            return true;
        }
        if (base === 'node_modules') {
            return true;
        }
    }
    return false;
};

colormap = {
    'punct': 'w3',
    'punct comment': 'w2',
    'punct comment triple': 'w2',
    'punct regexp start': 'm8',
    'punct regexp end': 'm8',
    'punct regexp': 'm2',
    'punct semver': 'r2',
    'punct escape regexp': 'm1',
    'punct string single': 'g1',
    'punct string double': 'g2',
    'punct string double triple': 'g2',
    'punct string interpolation start': 'g1',
    'punct string interpolation end': 'g1',
    'punct dictionary': 'y8',
    'punct property': 'y1',
    'punct range': 'b4',
    'punct function': 'r1',
    'punct function tail': 'b4',
    'punct function head': 'b4',
    'string single': 'g4',
    'string double': 'g6',
    'string double triple': 'g6',
    'nil': 'm2',
    'obj': 'y5',
    'text': 'w8',
    'text regexp': 'm6',
    'require': 'w3',
    'keyword': 'b8',
    'number': 'b7',
    'semver': 'r5',
    'module': 'y6',
    'property': 'y6',
    'dictionary key': 'y8',
    'function call': 'r5',
    'function': 'r4',
    'comment': 'w3',
    'comment header': ['g1', 'G1'],
    'comment triple header': ['g2', 'G2']
};

colorize = function(chunk) {
    var c, cn, j, len, v;
    if (cn = colormap[chunk.value]) {
        if (cn instanceof Array) {
            v = chunk.match;
            for (j = 0, len = cn.length; j < len; j++) {
                c = cn[j];
                v = kolor[c](v);
            }
            return v;
        } else {
            return kolor[cn](chunk.match);
        }
    }
    console.log('>>' + chunk.value + '<<');
    return chunk.match;
};

output = function(input, rngs) {
    var c, i, j, line, ref1;
    c = 0;
    line = '';
    for (i = j = 0, ref1 = rngs.length; 0 <= ref1 ? j < ref1 : j > ref1; i = 0 <= ref1 ? ++j : --j) {
        while (c < rngs[i].start) {
            c++;
            line += ' ';
        }
        line += colorize(rngs[i]);
        c += rngs[i].match.length;
    }
    return console.log(line);
};

NEWLINE = /\r?\n/;

search = function(paths) {
    var regexp;
    regexp = new RegExp("(" + args.strings.map(function(s) {
        return kstr.escapeRegexp(s);
    }).join('|') + ")", 'g');
    return paths.forEach(function(path) {
        var dir, file, index, j, line, lines, ref1, results, rngs, text;
        if (slash.isDir(path)) {
            dir = slash.resolve(path);
            if (!ignoreDir(dir)) {
                return search(fs.readdirSync(dir).map(function(p) {
                    return slash.join(dir, p);
                }));
            }
        } else if (slash.isText(path)) {
            file = slash.resolve(path);
            if (!ignoreFile(file)) {
                text = slash.readText(file);
                lines = text.split(NEWLINE);
                rngs = klor.dissect(lines, 'coffee');
                results = [];
                for (index = j = 0, ref1 = lines.length; 0 <= ref1 ? j < ref1 : j > ref1; index = 0 <= ref1 ? ++j : --j) {
                    line = lines[index];
                    if (line.search(regexp) >= 0) {
                        results.push(output(line, rngs[index]));
                    } else {
                        results.push(void 0);
                    }
                }
                return results;
            }
        }
    });
};

if (args.debug) {
    klog('args:', args);
}

search([args.path]);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia3JlcC5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBLElBQUE7O0FBUUEsTUFBNkMsT0FBQSxDQUFRLEtBQVIsQ0FBN0MsRUFBRSxtQkFBRixFQUFVLGlCQUFWLEVBQWlCLGVBQWpCLEVBQXVCLGVBQXZCLEVBQTZCLGVBQTdCLEVBQW1DLFdBQW5DLEVBQXVDOztBQUV2QyxLQUFBLEdBQVEsT0FBQSxDQUFRLFNBQVI7O0FBQ1IsSUFBQSxHQUFRLE9BQUEsQ0FBUSxNQUFSOztBQVFSLElBQUEsR0FBTyxJQUFBLENBQUsscW1CQUFBLEdBWUUsQ0FBQyxPQUFBLENBQVcsU0FBRCxHQUFXLGtCQUFyQixDQUF1QyxDQUFDLE9BQXpDLENBWlA7O0FBZVAsSUFBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQWIsR0FBc0IsQ0FBdEIsSUFBNEIsSUFBSSxDQUFDLElBQUwsS0FBYSxHQUE1QztJQUNJLElBQUcsS0FBSyxDQUFDLE1BQU4sQ0FBYSxJQUFJLENBQUMsT0FBUSxDQUFBLENBQUEsQ0FBMUIsQ0FBSDtRQUNJLElBQUksQ0FBQyxJQUFMLEdBQVksSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFiLENBQUEsRUFEaEI7S0FBQSxNQUVLLElBQUcsS0FBSyxDQUFDLE1BQU4sQ0FBYSxJQUFJLENBQUMsT0FBUSxVQUFFLENBQUEsQ0FBQSxDQUE1QixDQUFIO1FBQ0QsSUFBSSxDQUFDLElBQUwsR0FBWSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQWIsQ0FBQSxFQURYO0tBSFQ7OztBQVlBLFVBQUEsR0FBYSxTQUFDLENBQUQ7QUFFVCxRQUFBO0lBQUEsSUFBQSxHQUFPLEtBQUssQ0FBQyxRQUFOLENBQWUsQ0FBZjtJQUVQLElBQUcsS0FBSyxDQUFDLEdBQU4sQ0FBQSxDQUFIO1FBQ0ksSUFBZSxJQUFLLENBQUEsQ0FBQSxDQUFMLEtBQVcsR0FBMUI7QUFBQSxtQkFBTyxLQUFQOztRQUNBLElBQWUs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LENBQWMsSUFBZDtZQUNQLElBQUcsQ0FBSSxVQUFBLENBQVcsSUFBWCxDQUFQO2dCQUNJLElBQUEsR0FBTyxLQUFLLENBQUMsUUFBTixDQUFlLElBQWY7Z0JBQ1AsS0FBQSxHQUFRLElBQUksQ0FBQyxLQUFMLENBQVcsT0FBWDtnQkFFUixJQUFBLEdBQU8sSUFBSSxDQUFDLE9BQUwsQ0FBYSxLQUFiLEVBQW9CLFFBQXBCO0FBRVA7cUJBQWEsa0dBQWI7b0JBQ0ksSUFBQSxHQUFPLEtBQU0sQ0FBQSxLQUFBO29CQUNiLElBQUcsSUFBSSxDQUFDLE1BQUwsQ0FBWSxNQUFaLENBQUEsSUFBdUIsQ0FBMUI7cUNBQ0ksTUFBQSxDQUFPLElBQVAsRUFBYSxJQUFLLENBQUEsS0FBQSxDQUFsQixHQURKO3FCQUFBLE1BQUE7NkNBQUE7O0FBRko7K0JBTko7YUFIQzs7SUFSSyxDQUFkO0FBSks7O0FBZ0NULElBQXFCLElBQUksQ0FBQyxLQUExQjtJQUFBLElBQUEsQ0FBSyxPQUFMLEVBQWEsSUFBYixFQUFBOzs7QUFFQSxNQUFBLENBQU8sQ0FBQyxJQUFJLENBQUMsSUFBTixDQUFQIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAgICAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDAwIFxuMDAwICAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDBcbjAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMDAgXG4wMDAgIDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgIFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAgICBcbiMjI1xuXG57IGNoaWxkcCwgc2xhc2gsIGthcmcsIGtsb2csIGtzdHIsIGZzLCBfIH0gPSByZXF1aXJlICdreGsnXG5cbmtvbG9yID0gcmVxdWlyZSAnLi9rb2xvcidcbmtsb3IgID0gcmVxdWlyZSAna2xvcidcblxuIyAgMDAwMDAwMCAgIDAwMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDBcbiMgMDAwMDAwMDAwICAwMDAwMDAwICAgIDAwMCAgMDAwMCAgMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgIDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwXG5cbmFyZ3MgPSBrYXJnIFwiXCJcIlxua3JlcFxuICAgIHN0cmluZ3MgICAgICAgLiA/IHRleHQgdG8gc2VhcmNoIGZvciAgICAgICAgICAgICAgLiAqKlxuICAgIHBhdGggICAgICAgICAgLiA/IGZpbGUgb3IgZm9sZGVyIHRvIHNlYXJjaCBpbiAgICAgLiA9IHwufFxuICAgIHJlZ2V4cCAgICAgICAgLiA/IHN0cmluZ3MgYXJlIHJlZ2V4cCBwYXR0ZXJucyAgICAgLiA9IGZhbHNlXG4gICAgY29mZmVlICAgICAgICAuID8gc2VhcmNoIGNvZmZlZXNjcmlwdCBmaWxlcyAgICAgICAuID0gdHJ1ZVxuICAgIGpzICAgICAgICAgICAgLiA/IHNlYXJjaCBqYXZhc2NyaXB0IGZpbGVzICAgICAgICAgLiA9IGZhbHNlIFxuICAgIGRvdCAgICAgICAgICAgLiA/IHNlYXJjaCBkb3QgZmlsZXMgICAgICAgICAgICAgICAgLiA9IGZhbHNlXG4gICAgYW55ICAgICAgICAgICAuID8gc2VhcmNoIGFsbCB0ZXh0IGZpbGVzICAgICAgICAgICAuID0gZmFsc2VcbiAgICByZWN1cnNlICAgICAgIC4gPyByZWN1cnNlIGludG8gc3ViZGlycyAgICAgICAgICAgIC4gPSB0cnVlICAuIC0gUlxuICAgIGRlYnVnICAgICAgICAgLiA/IGRlYnVnIGxvZ3MgICAgICAgICAgICAgICAgICAgICAgLiA9IGZhbHNlIC4gLSBEXG5cbnZlcnNpb24gICAgICAje3JlcXVpcmUoXCIje19fZGlybmFtZX0vLi4vcGFja2FnZS5qc29uXCIpLnZlcnNpb259XG5cIlwiXCJcblxuaWYgYXJncy5zdHJpbmdzLmxlbmd0aCA+IDEgYW5kIGFyZ3MucGF0aCA9PSAnLidcbiAgICBpZiBzbGFzaC5leGlzdHMgYXJncy5zdHJpbmdzWzBdXG4gICAgICAgIGFyZ3MucGF0aCA9IGFyZ3Muc3RyaW5ncy5zaGlmdCgpXG4gICAgZWxzZSBpZiBzbGFzaC5leGlzdHMgYXJncy5zdHJpbmdzWy0xXVxuICAgICAgICBhcmdzLnBhdGggPSBhcmdzLnN0cmluZ3MucG9wKClcblxuIyAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMDAgIFxuIyAwMDAgIDAwMCAgICAgICAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuIyAwMDAgIDAwMCAgMDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIFxuIyAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuIyAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIFxuXG5pZ25vcmVGaWxlID0gKHApIC0+XG4gICAgXG4gICAgYmFzZSA9IHNsYXNoLmJhc2VuYW1lIHBcbiAgICBcbiAgICBpZiBzbGFzaC53aW4oKVxuICAgICAgICByZXR1cm4gdHJ1ZSBpZiBiYXNlWzBdID09ICckJ1xuICAgICAgICByZXR1cm4gdHJ1ZSBpZiBiYXNlID09ICdkZXNrdG9wLmluaSdcbiAgICAgICAgcmV0dXJuIHRydWUgaWYgYmFzZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGggJ250dXNlcidcbiAgICBpZiBub3QgYXJncy5hbGxcbiAgICAgICAgcmV0dXJuIHRydWUgaWYgYmFzZVswXSA9PSAnLidcbiAgICBmYWxzZVxuXG5pZ25vcmVEaXIgPSAocCkgLT5cbiAgICBcbiAgICBpZiBub3QgYXJncy5hbGxcbiAgICAgICAgYmFzZSA9IHNsYXNoLmJhc2VuYW1lIHBcbiAgICAgICAgcmV0dXJuIHRydWUgaWYgYmFzZVswXSA9PSAnLidcbiAgICAgICAgcmV0dXJuIHRydWUgaWYgYmFzZSA9PSAnbm9kZV9tb2R1bGVzJ1xuICAgIGZhbHNlXG4gICAgXG5jb2xvcm1hcCA9XG4gICAgJ3B1bmN0JzogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3czJ1xuICAgICdwdW5jdCBjb21tZW50JzogICAgICAgICAgICAgICAgICAgICd3MicgXG4gICAgJ3B1bmN0IGNvbW1lbnQgdHJpcGxlJzogICAgICAgICAgICAgJ3cyJyBcbiAgICAncHVuY3QgcmVnZXhwIHN0YXJ0JzogICAgICAgICAgICAgICAnbTgnIFxuICAgICdwdW5jdCByZWdleHAgZW5kJzogICAgICAgICAgICAgICAgICdtOCcgXG4gICAgJ3B1bmN0IHJlZ2V4cCc6ICAgICAgICAgICAgICAgICAgICAgJ20yJ1xuICAgICdwdW5jdCBzZW12ZXInOiAgICAgICAgICAgICAgICAgICAgICdyMicgXG4gICAgJ3B1bmN0IGVzY2FwZSByZWdleHAnOiAgICAgICAgICAgICAgJ20xJ1xuICAgICdwdW5jdCBzdHJpbmcgc2luZ2xlJzogICAgICAgICAgICAgICdnMScgXG4gICAgJ3B1bmN0IHN0cmluZyBkb3VibGUnOiAgICAgICAgICAgICAgJ2cyJyBcbiAgICAncHVuY3Qgc3RyaW5nIGRvdWJsZSB0cmlwbGUnOiAgICAgICAnZzInIFxuICAgICdwdW5jdCBzdHJpbmcgaW50ZXJwb2xhdGlvbiBzdGFydCc6ICdnMSdcbiAgICAncHVuY3Qgc3RyaW5nIGludGVycG9sYXRpb24gZW5kJzogICAnZzEnXG4gICAgJ3B1bmN0IGRpY3Rpb25hcnknOiAgICAgICAgICAgICAgICAgJ3k4JyBcbiAgICAncHVuY3QgcHJvcGVydHknOiAgICAgICAgICAgICAgICAgICAneTEnIFxuICAgICdwdW5jdCByYW5nZSc6ICAgICAgICAgICAgICAgICAgICAgICdiNCcgXG4gICAgJ3B1bmN0IGZ1bmN0aW9uJzogICAgICAgICAgICAgICAgICAgJ3IxJ1xuICAgICdwdW5jdCBmdW5jdGlvbiB0YWlsJzogICAgICAgICAgICAgICdiNCdcbiAgICAncHVuY3QgZnVuY3Rpb24gaGVhZCc6ICAgICAgICAgICAgICAnYjQnXG4gICAgJ3N0cmluZyBzaW5nbGUnOiAgICAgICAgICAgICAgICAgICAgJ2c0JyBcbiAgICAnc3RyaW5nIGRvdWJsZSc6ICAgICAgICAgICAgICAgICAgICAnZzYnIFxuICAgICdzdHJpbmcgZG91YmxlIHRyaXBsZSc6ICAgICAgICAgICAgICdnNicgXG4gICAgJ25pbCc6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ20yJ1xuICAgICdvYmonOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd5NScgXG4gICAgJ3RleHQnOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3c4JyBcbiAgICAndGV4dCByZWdleHAnOiAgICAgICAgICAgICAgICAgICAgICAnbTYnXG4gICAgJ3JlcXVpcmUnOiAgICAgICAgICAgICAgICAgICAgICAgICAgJ3czJyBcbiAgICAna2V5d29yZCc6ICAgICAgICAgICAgICAgICAgICAgICAgICAnYjgnIFxuICAgICdudW1iZXInOiAgICAgICAgICAgICAgICAgICAgICAgICAgICdiNycgXG4gICAgJ3NlbXZlcic6ICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3I1JyBcbiAgICAnbW9kdWxlJzogICAgICAgICAgICAgICAgICAgICAgICAgICAneTYnIFxuICAgICdwcm9wZXJ0eSc6ICAgICAgICAgICAgICAgICAgICAgICAgICd5NicgXG4gICAgJ2RpY3Rpb25hcnkga2V5JzogICAgICAgICAgICAgICAgICAgJ3k4JyBcbiAgICAnZnVuY3Rpb24gY2FsbCc6ICAgICAgICAgICAgICAgICAgICAncjUnIFxuICAgICdmdW5jdGlvbic6ICAgICAgICAgICAgICAgICAgICAgICAgICdyNCcgXG4gICAgJ2NvbW1lbnQnOiAgICAgICAgICAgICAgICAgICAgICAgICAgJ3czJ1xuICAgICdjb21tZW50IGhlYWRlcic6ICAgICAgICAgICAgICAgICAgIFsnZzEnLCAnRzEnXVxuICAgICdjb21tZW50IHRyaXBsZSBoZWFkZXInOiAgICAgICAgICAgIFsnZzInLCAnRzInXVxuICAgIFxuY29sb3JpemUgPSAoY2h1bmspIC0+IFxuXG4gICAgaWYgY24gPSBjb2xvcm1hcFtjaHVuay52YWx1ZV1cbiAgICAgICAgaWYgY24gaW5zdGFuY2VvZiBBcnJheVxuICAgICAgICAgICAgdiA9IGNodW5rLm1hdGNoXG4gICAgICAgICAgICBmb3IgYyBpbiBjblxuICAgICAgICAgICAgICAgIHYgPSBrb2xvcltjXSB2XG4gICAgICAgICAgICByZXR1cm4gdlxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4ga29sb3JbY25dIGNodW5rLm1hdGNoXG4gICAgbG9nICc+PicrY2h1bmsudmFsdWUrJzw8J1xuICAgIGNodW5rLm1hdGNoXG4gICAgXG5vdXRwdXQgPSAoaW5wdXQsIHJuZ3MpIC0+XG4gICAgXG4gICAgYyA9IDBcbiAgICBsaW5lID0gJydcbiAgICBmb3IgaSBpbiBbMC4uLnJuZ3MubGVuZ3RoXVxuICAgICAgICB3aGlsZSBjIDwgcm5nc1tpXS5zdGFydCBcbiAgICAgICAgICAgIGMrK1xuICAgICAgICAgICAgbGluZSArPSAnICdcbiAgICAgICAgbGluZSArPSBjb2xvcml6ZSBybmdzW2ldXG4gICAgICAgIGMgKz0gcm5nc1tpXS5tYXRjaC5sZW5ndGhcbiAgICBsb2cgbGluZVxuICAgIFxuIyAgMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwICBcbiMgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4jIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwICAgIDAwMCAgICAgICAwMDAwMDAwMDAgIFxuIyAgICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICBcbiMgMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgXG5cbk5FV0xJTkUgPSAvXFxyP1xcbi9cbnNlYXJjaCA9IChwYXRocykgLT5cbiAgICBcbiAgICByZWdleHAgPSBuZXcgUmVnRXhwIFwiKFwiICsgYXJncy5zdHJpbmdzLm1hcCgocyktPmtzdHIuZXNjYXBlUmVnZXhwKHMpKS5qb2luKCd8JykgKyBcIilcIiwgJ2cnXG5cbiAgICBwYXRocy5mb3JFYWNoIChwYXRoKSAtPlxuICAgICAgICBcbiAgICAgICAgaWYgc2xhc2guaXNEaXIgcGF0aFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkaXIgPSBzbGFzaC5yZXNvbHZlIHBhdGhcbiAgICAgICAgICAgIGlmIG5vdCBpZ25vcmVEaXIgZGlyXG4gICAgICAgICAgICAgICAgc2VhcmNoIGZzLnJlYWRkaXJTeW5jKGRpcikubWFwIChwKSAtPiBzbGFzaC5qb2luIGRpciwgcFxuICAgICAgICAgICAgXG4gICAgICAgIGVsc2UgaWYgc2xhc2guaXNUZXh0IHBhdGhcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZmlsZSA9IHNsYXNoLnJlc29sdmUgcGF0aFxuICAgICAgICAgICAgaWYgbm90IGlnbm9yZUZpbGUgZmlsZVxuICAgICAgICAgICAgICAgIHRleHQgPSBzbGFzaC5yZWFkVGV4dCBmaWxlXG4gICAgICAgICAgICAgICAgbGluZXMgPSB0ZXh0LnNwbGl0IE5FV0xJTkVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBybmdzID0ga2xvci5kaXNzZWN0IGxpbmVzLCAnY29mZmVlJ1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciBpbmRleCBpbiBbMC4uLmxpbmVzLmxlbmd0aF1cbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IGxpbmVzW2luZGV4XVxuICAgICAgICAgICAgICAgICAgICBpZiBsaW5lLnNlYXJjaChyZWdleHApID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCBsaW5lLCBybmdzW2luZGV4XVxuICAgICAgICAgICAgXG4jIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDBcbiMgMDAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwXG4jIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDBcblxua2xvZyAnYXJnczonIGFyZ3MgaWYgYXJncy5kZWJ1Z1xuXG5zZWFyY2ggW2FyZ3MucGF0aF1cbiJdfQ==
//# sourceURL=../coffee/krep.coffee